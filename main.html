<!DOCTYPE HTML>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">
  var words = {
    alert:safari.extension.settings.alert,
    highlight:safari.extension.settings.highlight,
    author:safari.extension.settings.author
  }
  function wordsChanged() {
    words[event.key] = event.newValue;
  }
  safari.extension.settings.addEventListener("change", wordsChanged, false);
  
  function returnWord(event, val) {
      event.target.page.dispatchMessage("theWords", words[val]);
  }
 
  function respondToGetWord(theMessageEvent) {
      if(theMessageEvent.name === "getWord") {
          var startVal=theMessageEvent.message;
          returnCWord(theMessageEvent);
      }
  }
  safari.application.addEventListener("message",respondToGetCWord,false);
</script>